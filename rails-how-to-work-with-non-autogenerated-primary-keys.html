<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>[Rails] How to work with non-autogenerated primary keys</title>
        <link rel="stylesheet" href="/theme/css/main.css">

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Blog </a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/misc.html">misc</a></li>
                    <li><a href="/category/text.html">text</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/rails-how-to-work-with-non-autogenerated-primary-keys.html" rel="bookmark"
           title="Permalink to [Rails] How to work with non-autogenerated primary keys">[Rails] How to work with non-autogenerated primary keys</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2006-06-30T17:59:00">
                Fri 30 June 2006
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/chandrakant-noreplybloggercom.html">chandrakant (noreply@blogger.com)</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>. </p>
<p>tags: <a href="/tag/httpschemasgooglecomblogger2008kindpost.html">http://schemas.google.com/blogger/2008/kind#post</a></p>
</footer><!-- /.post-info -->      <p><div class="line-block">
<div class="line">Oddly enough, I have not found a clear explanation of how to make</div>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">/Users/cgopalan/my_blog/content/rails-how-to-work-with-non-autogenerated-primary-keys.rst</tt>, line 13)</p>
Line block ends without a blank line.</div>
<p>ActiveRecord work with a table that has a non-autogenerated primary key.
In other words, the table has a column as a primary key for which the
value has to be inserted manually. (Of course this is not good practice
but what other better reason to do this than to say such a table already
exists and needed a user interface for maintaining its values!)
| So how do we go about doing this? Simple. First, set the primary key
in the Model object to be the column in the table (since ActiveRecord
always assumes primary key is a column called &quot;id&quot;). If we just run this
and try to save the model object by firing up the rails console, rails
gives an error saying there are no attributes &quot;col1&quot;. This is because,
rails assumes that the primary key is not editable. So all we have to do
is define attributes for the primary key column col1. The overall
changes are shown below:
|
| class MyModel &lt; ActiveRecord::Base</p>
<blockquote>
set_primary_key &quot;col1&quot;
def col1
read_attribute &quot;col1&quot;
end
def col1=(value)
write_attribute &quot;col1&quot;, value
end</blockquote>
<div class="line-block">
<div class="line">end</div>
<div class="line"><br /></div>
<div class="line">Now fire up the rails console and create and save the model object,</div>
</div>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">/Users/cgopalan/my_blog/content/rails-how-to-work-with-non-autogenerated-primary-keys.rst</tt>, line 38)</p>
Line block ends without a blank line.</div>
<p>setting values for the required columns. Voila!
| <em>Note: since you are departing a bit from rails convention of primary
keys, you will need to make sure that the required validations are added
in the model so that you dont get errors from the database.</em>
|</p>
</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>